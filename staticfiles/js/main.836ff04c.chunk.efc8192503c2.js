(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{24:function(e,t,n){},25:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),o=n(19),r=n.n(o),c=(n(24),n(2)),i=(n(25),n(3)),l=n.n(i),u=n(5),d=n(6),g=n(7),j=n(8),h=n(0);var b=function(e){var t=e.setSongAdded,n=e.songAdded,s=e.setHideForm,o=e.setAddSong,r=Object(a.useState)({song_name:"",artist_name:"",genre:"",year_of_release:"",duration_of_song:""}),i=Object(c.a)(r,2),b=i[0],m=i[1],f=Object(a.useState)(""),p=Object(c.a)(f,2),O=p[0],_=p[1],x=Object(a.useState)(!1),v=Object(c.a)(x,2),y=v[0],N=v[1],S=function(e){var t=e.target.value;m(Object(j.a)(Object(j.a)({},b),{},Object(g.a)({},e.target.name,t)))},w=function(){var e=Object(d.a)(Object(u.a)().mark((function e(a){var r;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),e.prev=1,!(b.year_of_release<1860||b.year_of_release>2030)){e.next=7;break}N(!0),_("Please enter a valid year"),e.next=17;break;case 7:if(!isNaN(b.duration_of_song[0])&&!isNaN(b.duration_of_song[1])&&!isNaN(b.duration_of_song[3])&&!isNaN(b.duration_of_song[4])&&":"===b.duration_of_song[2]&&parseInt(b.duration_of_song[3])<6){e.next=13;break}N(!0),_("Please enter a valid duration using the required formatting: 00:00"),e.next=17;break;case 13:return e.next=15,l.a.post("http://localhost:8000/api/songs/",{song_name:b.song_name,artist_name:b.artist_name});case 15:r=e.sent,l.a.post("http://localhost:8000/api/details/",{song:r.data.id,genre:b.genre,year_of_release:b.year_of_release,duration_of_song:b.duration_of_song}).then((function(e){N(!1),t(!n),s(!0),o(!1),l.a.post("http://localhost:8000/api/ratings/",{username:18,song:r.data.id,rating:0})})).catch((function(e){l.a.delete("http://localhost:8000/api/songs/".concat(r.data.id)),console.log("hiii"),N(!0),_("Please fill in all the fields with valid information!")}));case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(1),console.log(e.t0.response.data),e.t0.response.data.song_name&&"song with this song name already exists."==e.t0.response.data.song_name[0]?(N(!0),_("You can already enjoy information about this song in our website! It is already in our database!")):(N(!0),_("Please fill in all the fields with valid information!"));case 23:case 24:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{children:[Object(h.jsxs)("form",{className:"song-form",onSubmit:w,children:[Object(h.jsx)("input",{type:"text",placeholder:"Song Name",value:b.song_name,name:"song_name",className:"song-input",onChange:S}),Object(h.jsx)("input",{type:"text",placeholder:"Artist Name",value:b.artist_name,name:"artist_name",className:"song-input",onChange:S}),Object(h.jsx)("input",{type:"text",placeholder:"Short Description",value:b.genre,name:"genre",className:"song-input",onChange:S}),Object(h.jsx)("input",{type:"number",placeholder:"Year of Release",value:b.year_of_release,name:"year_of_release",className:"song-input",onChange:S}),Object(h.jsx)("input",{type:"text",placeholder:"Duration in Format: 00:00",value:b.duration_of_song,name:"duration_of_song",className:"song-input",onChange:S}),Object(h.jsx)("button",{className:"song-button",children:"Add Song"})]}),Object(h.jsx)("p",{className:"error-msg",children:y?O:null})]})};var m=function(e){var t=e.songAdded,n=e.setRightColumn,s=e.setSongID,o=e.rightColumn,r=Object(a.useState)([]),i=Object(c.a)(r,2),u=i[0],d=i[1],g=Object(a.useState)([]),j=Object(c.a)(g,2),b=j[0],m=j[1],f=Object(a.useState)(""),p=Object(c.a)(f,2),O=p[0],_=p[1],x=Object(a.useState)(""),v=Object(c.a)(x,2),y=v[0],N=v[1];Object(a.useEffect)((function(){l.a.get("http://localhost:8000/api/details/").then((function(e){d(e.data)})).catch((function(e){return console.log(e)}))}),[t,o]),Object(a.useEffect)((function(){l.a.get("http://localhost:8000/api/songs/").then((function(e){m(e.data)})).catch((function(e){return console.log("no")}))}),[t,o]);var S=function(e){return b.filter((function(t){return t.id==e}))[0]};return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("input",{type:"text",className:"search-bar",placeholder:"Search by Song Name or Artist Name",onChange:function(e){_(e.target.value)}}),Object(h.jsx)("p",{className:"sort-by",children:"Sort By:"}),Object(h.jsxs)("select",{className:"sort-by-select",onChange:function(e){var t=e.target.value;N(t)},children:[Object(h.jsx)("option",{value:"none",children:"None"}),Object(h.jsx)("option",{value:"song_name",children:"Song Name"}),Object(h.jsx)("option",{value:"rating",children:"Rating"}),Object(h.jsx)("option",{value:"year_of_release",children:"Year of Release"})]}),Object(h.jsx)("ul",{className:"list-container",children:u.filter((function(e){return""==O?S(e.song):S(e.song).song_name.toLowerCase().includes(O.toLowerCase())||S(e.song).artist_name.toLowerCase().includes(O.toLowerCase())?e:void 0})).sort((function(e,t){return"song_name"==y?S(e.song).song_name.localeCompare(S(t.song).song_name):"rating"==y?e.rating-t.rating:"year_of_release"==y?e.year_of_release-t.year_of_release:void 0})).map((function(e){return Object(h.jsxs)("li",{className:"song-list",children:[Object(h.jsx)("button",{className:"song-name-button",onClick:function(t){return a=e.song,n("song_details"),void s(a);var a},children:S(e.song).song_name}),Object(h.jsx)("p",{className:"song-para",children:S(e.song).artist_name}),Object(h.jsxs)("div",{className:"align-right",children:[Object(h.jsx)("button",{className:"song-update-button",onClick:function(t){return a=e.song,n("song_update"),void s(a);var a},children:"Update"}),Object(h.jsx)("button",{className:"song-delete-button",onClick:function(t){return a=e.song,n("song_delete"),void s(a);var a},children:"Delete"})]})]})}))})]})};var f=function(e){var t=e.songID,n=Object(a.useState)({}),s=Object(c.a)(n,2),o=s[0],r=s[1],i=Object(a.useState)({}),g=Object(c.a)(i,2),j=g[0],b=g[1],m=Object(a.useState)(0),f=Object(c.a)(m,2),p=f[0],O=f[1],_=Object(a.useState)(0),x=Object(c.a)(_,2),v=x[0],y=x[1],N=Object(a.useState)(""),S=Object(c.a)(N,2),w=S[0],C=S[1],k=Object(a.useState)(!1),A=Object(c.a)(k,2),D=A[0],R=A[1];Object(a.useEffect)((function(){l.a.get("http://localhost:8000/api/songs/".concat(t,"/")).then((function(e){return r(e.data)})).catch((function(e){return console.log(e.response)}))}),[t]),Object(a.useEffect)(Object(d.a)(Object(u.a)().mark((function e(){var n,a;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("http://localhost:8000/api/details");case 2:n=e.sent,a=n.data,b(a.filter((function(e){return e.song==t}))[0]);case 5:case"end":return e.stop()}}),e)}))),[t]),Object(a.useEffect)(Object(d.a)(Object(u.a)().mark((function e(){var n,a,s;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("http://localhost:8000/api/ratings");case 2:n=e.sent,a=n.data,s=a.filter((function(e){return e.song==t}))[0],O(s.id),y(s.rating);case 7:case"end":return e.stop()}}),e)}))),[t]);var I=function(){var e=Object(d.a)(Object(u.a)().mark((function e(n){var a;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),n.target[0].checked?(a=1,R(!1)):n.target[1].checked?(a=2,R(!1)):n.target[2].checked?(a=3,R(!1)):n.target[3].checked?(a=4,R(!1)):n.target[4].checked?(a=5,R(!1)):(R(!0),C("Please choose a rating!")),D||l.a.put("http://localhost:8000/api/ratings/".concat(p,"/"),{rating:a,song:t,username:19}).then((function(e){console.log(e.data),a&&y(a)})).catch((function(e){console.log(e.response)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{className:"details-header",children:"Song Details"}),Object(h.jsxs)("ul",{className:"details-list",children:[Object(h.jsxs)("li",{children:["Song Name: ",o.song_name]}),Object(h.jsxs)("li",{children:["Artist Name: ",o.artist_name]}),Object(h.jsxs)("li",{children:["Short Description: ",j.genre]}),Object(h.jsxs)("li",{children:["Year of Release: ",j.year_of_release]}),Object(h.jsxs)("li",{children:["Duration of Song: ",j.duration_of_song]}),0===v?Object(h.jsx)("li",{children:"Last Rating: None"}):Object(h.jsxs)("li",{children:["Last Rating: ",v]})]}),Object(h.jsxs)("form",{className:"welcome-msg",onSubmit:I,children:[Object(h.jsx)("input",{type:"radio",className:"rating-input",name:"rating",value:1}),Object(h.jsx)("label",{for:"1",children:"1"}),Object(h.jsx)("input",{type:"radio",className:"rating-input",name:"rating",value:2}),Object(h.jsx)("label",{for:"2",children:"2"}),Object(h.jsx)("input",{type:"radio",className:"rating-input",name:"rating",value:3}),Object(h.jsx)("label",{for:"3",children:"3"}),Object(h.jsx)("input",{type:"radio",className:"rating-input",name:"rating",value:4}),Object(h.jsx)("label",{for:"4",children:"4"}),Object(h.jsx)("input",{type:"radio",className:"rating-input",name:"rating",value:5}),Object(h.jsx)("label",{for:"5",children:"5"}),Object(h.jsx)("button",{className:"song-button",children:"Rate!"})]}),Object(h.jsx)("p",{className:"error-msg",children:D?w:null})]})};var p=function(e){var t=e.songID,n=e.setRightColumn,s=Object(a.useState)({song_name:"",artist_name:"",genre:"",year_of_release:"",duration_of_song:""}),o=Object(c.a)(s,2),r=o[0],i=o[1],b=Object(a.useState)(""),m=Object(c.a)(b,2),f=m[0],p=m[1],O=Object(a.useState)(!1),_=Object(c.a)(O,2),x=_[0],v=_[1],y=Object(a.useState)([]),N=Object(c.a)(y,2),S=N[0],w=N[1],C=function(e){var t=e.target.value;i(Object(j.a)(Object(j.a)({},r),{},Object(g.a)({},e.target.name,t)))};Object(a.useEffect)((function(){l.a.get("http://localhost:8000/api/songs/").then((function(e){w(e.data)})).catch((function(e){return console.log("no")}))}),[t]);var k=function(e){return S.filter((function(t){return t.id==e}))[0]},A=function(){var e=Object(d.a)(Object(u.a)().mark((function e(a){var s,o,c,i,d;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,l.a.get("http://localhost:8000/api/details/");case 4:return s=e.sent,o=s.data.filter((function(e){return k(e.song).id==t}))[0],c=o.id,i=function(){return""==r.song_name&&""==r.artist_name?{song_name:k(t).song_name,artist_name:k(t).artist_name}:""==r.song_name?{song_name:k(t).song_name,artist_name:r.artist_name}:""==r.artist_name?{song_name:r.song_name,artist_name:k(t).artist_name}:{song_name:r.song_name,artist_name:r.artist_name}}(),console.log(i),e.next=12,l.a.put("http://localhost:8000/api/songs/".concat(t,"/"),i);case 12:d=e.sent,l.a.put("http://localhost:8000/api/details/".concat(c,"/"),{song:d.data.id,genre:r.genre||o.genre,year_of_release:r.year_of_release||o.year_of_release,duration_of_song:r.duration_of_song||o.duration_of_song}).then((function(e){v(!1),n("Welcome!")})).catch((function(e){console.log(e.response),v(!1),n("Welcome!")})),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0.response.data),e.t0.response.data.song_name&&"song with this song name already exists."==e.t0.response.data.song_name[0]?(v(!0),p("You can already enjoy information about this song in our website!")):(v(!0),p("Please fill in all the fields!"));case 20:case 21:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{children:[Object(h.jsx)("p",{className:"welcome-msg",children:"If you leave a field empty, its value will stay the same."}),Object(h.jsxs)("form",{className:"song-form",onSubmit:A,children:[Object(h.jsx)("input",{type:"text",placeholder:"Song Name",value:r.song_name,name:"song_name",className:"song-input",onChange:C}),Object(h.jsx)("input",{type:"text",placeholder:"Artist Name",value:r.artist_name,name:"artist_name",className:"song-input",onChange:C}),Object(h.jsx)("input",{type:"text",placeholder:"Short Description",value:r.genre,name:"genre",className:"song-input",onChange:C}),Object(h.jsx)("input",{type:"number",placeholder:"Year of Release",value:r.year_of_release,name:"year_of_release",className:"song-input",onChange:C}),Object(h.jsx)("input",{type:"text",placeholder:"Duration in Format: 00:00",value:r.duration_of_song,name:"duration_of_song",className:"song-input",onChange:C}),Object(h.jsx)("button",{className:"song-button",children:"Update"})]}),Object(h.jsx)("p",{className:"error-msg",children:x?f:null}),Object(h.jsx)("p",{className:"error-msg",children:void 0==f?"Please enter an Artist Name":null})]})};var O=function(e){var t=e.songID,n=e.setRightColumn,s=Object(a.useState)(""),o=Object(c.a)(s,2),r=o[0],i=o[1],u=Object(a.useState)(!1),d=Object(c.a)(u,2),g=d[0],j=d[1];return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"are-you-sure",children:[Object(h.jsx)("p",{children:"Are you sure you want to delete this song?"}),Object(h.jsx)("button",{className:"delete-yes",onClick:function(){l.a.delete("http://localhost:8000/api/songs/".concat(t,"/")).then((function(e){j(!1),n("Welcome!")})).catch((function(e){j(!0),i(e.response.data.song_name)}))},children:"Yes"}),Object(h.jsx)("button",{className:"delete-no",onClick:function(){n("Welcome!")},children:"No"})]}),Object(h.jsx)("p",{className:"error-msg",children:g?r:null})]})};var _=function(){return Object(h.jsxs)("div",{className:"welcome-msg",children:[Object(h.jsx)("h1",{children:"Welcome to our Song Rating Site!"}),Object(h.jsx)("h2",{children:"Let me run you through the functionality of our app!"}),Object(h.jsx)("p",{children:"You can add any song to our database through the 'Add a New Song' button."}),Object(h.jsx)("p",{children:"You can Update any song, and any field you leave blank in the update form will retain its original value."}),Object(h.jsx)("p",{children:"If you find you don't like any of the songs, you can delete them using the delete button."}),Object(h.jsx)("p",{children:"We believe in a different type of democracy here. If one person wants a song to be deleted, they can delete it without any need for any authority or authorization. "}),Object(h.jsx)("p",{children:"If you click on the song name, our app will display the details of that song, including its last rating (Yes, last rating! We don't believe in averages!). Using the add rating field, you can add your rating."}),Object(h.jsx)("p",{children:"Using our Search Bar, you can search for songs through either the Song name or the Artist name."}),Object(h.jsx)("p",{children:"You can also sort the list of songs by song name, rating and the year of release."})]})};var x=function(){var e=Object(a.useState)(!1),t=Object(c.a)(e,2),n=t[0],s=t[1],o=Object(a.useState)(!1),r=Object(c.a)(o,2),i=r[0],l=r[1],u=Object(a.useState)(0),d=Object(c.a)(u,2),g=d[0],j=d[1],x=Object(a.useState)("Welcome!"),v=Object(c.a)(x,2),y=v[0],N=v[1],S=Object(a.useState)(!0),w=Object(c.a)(S,2),C=w[0],k=w[1];return Object(h.jsxs)("div",{className:"song-rater",children:[Object(h.jsx)("h1",{className:"heading",children:"Song Rater"}),Object(h.jsxs)("div",{className:"flex-container",children:[Object(h.jsxs)("div",{className:"flex-item",children:[Object(h.jsx)("div",{className:"add-song-button",children:Object(h.jsx)("button",{className:"add-song-button1",onClick:function(){s(!n),k(!1)},children:"Add a new song"})}),n&&!C?Object(h.jsx)(b,{setSongAdded:l,songAdded:i,setHideForm:k,setAddSong:s}):null,Object(h.jsx)(m,{songAdded:i,setSongAdded:l,setRightColumn:N,setSongID:j,rightColumn:y})]}),Object(h.jsxs)("div",{className:"flex-item",children:["Welcome!"==y?Object(h.jsx)(_,{}):null,"song_details"==y?Object(h.jsx)(f,{songID:g}):null,"song_update"==y?Object(h.jsx)(p,{songID:g,setRightColumn:N}):null,"song_delete"==y?Object(h.jsx)(O,{songID:g,setRightColumn:N}):null]})]})]})};r.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(x,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.836ff04c.chunk.js.1141d29b687d.map